{
    "name": "cerb.ticket.assign",
    "description": "An interaction for quickly assigning tickets",
    "extension_id": "cerb.trigger.interaction.worker",
    "script": "inputs:\r\n  record/ticket:\r\n    record_type: ticket\r\n    required@bool: yes\r\n  text/unassign:\r\n    type: bool\r\n\r\nstart:\r\n  decision/action:\r\n    outcome/unassign:\r\n      if@bool: {{inputs.unassign}}\r\n      then:\r\n        set:\r\n          prompt_worker_id: 0\r\n    outcome/else:\r\n        then:\r\n          await/owner:\r\n            form:\r\n              title: Assign\r\n              elements:\r\n                sheet/prompt_worker_id:\r\n                  label: To which worker:\r\n                  required@bool: yes\r\n                  limit: 25\r\n                  data:\r\n                    automation:\r\n                      uri: cerb:automation:cerb.data.records\r\n                      inputs:\r\n                        record_type: worker\r\n                        query: group:(id:{{inputs.ticket.group_id}}) isDisabled:n sort:firstName\r\n                  schema:\r\n                    layout:\r\n                      style: grid\r\n                      filtering@bool: yes\r\n                      headings@bool: no\r\n                      paging@bool: yes\r\n                    columns:\r\n                      selection/id:\r\n                        params:\r\n                          mode: single\r\n                      icon/image:\r\n                        params:\r\n                          record_uri@raw: cerb:worker:{{id}}\r\n                          text_size@raw: 250%\r\n                      text/_label:\r\n                        params:\r\n                          bold@bool: yes\r\n                          underline@bool: no\r\n                          text_size@raw: 125%\r\n                      text/title:\r\n                submit:\r\n                  continue@bool: no\r\n                  reset@bool: no\r\n\r\n  record.update/ticket:\r\n    output: updated_ticket\r\n    inputs:\r\n      # See: https://cerb.ai/docs/records/types/ticket/#records-api\r\n      record_type: ticket\r\n      record_id: {{inputs.ticket.id}}\r\n      fields:\r\n        owner_id: {{prompt_worker_id}}\r\n  ",
    "policy_kata": "commands:\r\n  record.update:\r\n    deny/type@bool: {{inputs.record_type is not record type ('ticket')}}\r\n    deny/fields@bool: {{inputs.fields|keys is not same as ['owner_id']}}\r\n    allow@bool: yes",
    "created_at": 1692133818,
    "updated_at": 1692133818
}